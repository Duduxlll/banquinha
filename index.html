<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bancas • Depósito PIX</title>

  <!-- Igual à APP_PUBLIC_KEY do servidor -->
  <meta name="app-key" content="b01c7cd2e87519f8d0e62fafc69c80f8babb54d0a9799fefdad28d4520e7d25bd39f140cb948041e5c5caa43e7d7f905">

  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="stylesheet" href="assets/css/pix.css">
</head>
<body>
  <header>
    <div class="wrap">
      <div class="topbar">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <div class="brand">Bancas</div>
          <div class="subtitle">Depósito via PIX simples e seguro ✨</div>
        </div>
      </div>
    </div>
  </header>

  <main class="wrap">
    <div class="grid">
      <!-- FORMULÁRIO -->
      <section class="card" aria-labelledby="form-title">
        <div class="banner">
          <div class="hero-shape" aria-hidden="true"></div>
        </div>

        <div class="card-header">
          <span class="pill">1ª etapa</span>
          <h2 id="form-title" style="margin:12px 0 0">Identificação & Chave PIX</h2>
          <p class="subtitle" style="margin:6px 0 0">Escolha o tipo de chave e preencha os dados para receber o depósito.</p>
        </div>

        <div class="card-body">
          <form id="depositoForm" novalidate>
            <div class="row">
              <div>
                <label for="tipoChave">Tipo de chave PIX</label>
                <select class="input" id="tipoChave" name="tipoChave" required>
                  <option value="cpf">CPF</option>
                  <option value="aleatoria">Chave aleatória</option>
                  <option value="telefone">Número de telefone</option>
                  <option value="email">E-mail</option>
                </select>
                <p class="help">Ao selecionar <strong>CPF</strong>, digite o seu CPF (11 dígitos) no campo ao lado.</p>
              </div>

              <div id="chaveWrapper">
                <label for="chavePix">Informe sua chave PIX</label>
                <input class="input" type="text" id="chavePix" name="chavePix" placeholder="Cole aqui sua chave" autocomplete="off">
                <div class="error" id="chaveError">Informe uma chave PIX válida.</div>
              </div>
            </div>

            <div style="margin-top:16px">
              <label for="nome">Nome da Twitch</label>
              <input class="input" type="text" id="nome" name="nome" placeholder="Seu nome" required>
              <div class="error" id="nomeError">Informe seu nome.</div>
            </div>

            <!-- [ADD mensagem] campo de mensagem opcional -->
            <div style="margin-top:16px">
              <label for="mensagem">Mensagem (opcional)</label>
              <textarea class="input" id="mensagem" name="message" rows="3" maxlength="240"
                        placeholder="Escreva uma mensagem para aparecer na Área (máx. 240 caracteres)"></textarea>
              <p class="help">Essa mensagem será exibida na Área administrativa, no botão <strong>Ver mensagem</strong>.</p>
            </div>
            <!-- [/ADD mensagem] -->

            <div style="margin-top:16px">
              <label for="valor">Valor do depósito</label>
              <input class="input" type="text" id="valor" name="valor" inputmode="decimal" placeholder="R$ 10,00 (mínimo)" required>
              <div class="error" id="valorError">O valor mínimo é R$ 10,00.</div>
            </div>

            <button class="cta" id="btnDepositar" type="submit" style="width:100%">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 5v10m0 0l-3.5-3.5M12 15l3.5-3.5M4 19h16"/></svg>
              Fazer depósito
            </button>
          </form>
        </div>
      </section>

      <!-- RESUMO AO LADO -->
      <aside class="aside">
        <section class="card">
          <div class="card-body">
            <h3 style="margin-top:0">Resumo</h3>
            <ul class="summary-list" id="resumo">
              <li><span class="k">Nome</span> <span id="r-nome">—</span></li>
              <li><span class="k">Tipo de chave</span> <span id="r-tipo">CPF</span></li>
              <li><span class="k">Chave</span> <span id="r-chave">—</span></li>
              <li><span class="k">Valor</span> <span id="r-valor">—</span></li>
              <!-- [ADD mensagem] resumo da mensagem -->
              <li><span class="k">Mensagem</span> <span id="r-msg">—</span></li>
              <!-- [/ADD mensagem] -->
            </ul>
          </div>
        </section>

        <section class="card">
          <div class="card-body">
            <h3 style="margin-top:0">Como funciona</h3>
            <ol style="margin:0 0 0 18px; color:var(--muted); line-height:1.6">
              <li>Escolha o <strong>tipo de chave PIX</strong> (CPF, aleatória, telefone ou e-mail).</li>
              <li>No campo ao lado, informe a <strong>chave</strong> (se escolher <strong>CPF</strong>, digite o seu CPF).</li>
              <li>Preencha o <strong>nome da twitch</strong>, <strong>mensagem</strong> (opcional) e o <strong>valor</strong> (mínimo R$ 10,00).</li>
              <li>Clique em <strong>Fazer depósito</strong>. O QR-Code será gerado e, após o pagamento, o registro aparece na Área.</li>
            </ol>
          </div>
        </section>
      </aside>
    </div>

    <footer>
      © <span id="ano"></span> Bancas.
    </footer>
  </main>

  <!-- TOAST -->
  <div class="toast" id="toast"></div>

  <!-- Scripts -->
  <script src="assets/js/app.js"></script>

  <!-- [ADD mensagem] Só atualiza o “Resumo” da mensagem enquanto digita -->
  <script>
    (function () {
      const ta = document.getElementById('mensagem');
      const out = document.getElementById('r-msg');
      const limit = 100; // preview no resumo

      function update() {
        if (!ta || !out) return;
        const txt = (ta.value || '').trim();
        out.textContent = txt
          ? (txt.length > limit ? txt.slice(0, limit) + '…' : txt)
          : '—';
      }
      ta && ta.addEventListener('input', update);
      document.addEventListener('DOMContentLoaded', update);
    })();
  </script>
  <!-- [/ADD mensagem] -->
</body>
</html>
